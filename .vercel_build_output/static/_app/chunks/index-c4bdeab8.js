import{w as r}from"./index-cc16b092.js";import{m as t,a1 as e,a2 as n,W as o}from"./index-d91e1ed8.js";function s(r){return"[object Date]"===Object.prototype.toString.call(r)}function i(r,t){if(r===t||r!=r)return()=>r;const e=typeof r;if(e!==typeof t||Array.isArray(r)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(r)){const e=t.map(((t,e)=>i(r[e],t)));return r=>e.map((t=>t(r)))}if("object"===e){if(!r||!t)throw new Error("Object cannot be null");if(s(r)&&s(t)){r=r.getTime();const e=(t=t.getTime())-r;return t=>new Date(r+t*e)}const e=Object.keys(t),n={};return e.forEach((e=>{n[e]=i(r[e],t[e])})),r=>{const t={};return e.forEach((e=>{t[e]=n[e](r)})),t}}if("number"===e){const e=t-r;return t=>r+t*e}throw new Error(`Cannot interpolate ${e} values`)}function a(s,a={}){const u=r(s);let c,f=s;function l(r,l){if(null==s)return u.set(s=r),Promise.resolve();f=r;let p=c,b=!1,{delay:m=0,duration:y=400,easing:d=o,interpolate:w=i}=t(t({},a),l);if(0===y)return p&&(p.abort(),p=null),u.set(s=f),Promise.resolve();const j=e()+m;let A;return c=n((t=>{if(t<j)return!0;b||(A=w(s,r),"function"==typeof y&&(y=y(s,r)),b=!0),p&&(p.abort(),p=null);const e=t-j;return e>y?(u.set(s=r),!1):(u.set(s=A(d(e/y))),!0)})),c.promise}return{set:l,update:(r,t)=>l(r(f,s),t),subscribe:u.subscribe}}export{a as t};
